{% extends "base.html" %}
{% block content %}
<h2>{{ course.title }}</h2>
<p>{{ course.description }}</p>

{% if total > 0 %}
    <p>Progress: {{ completed }}/{{ total }} lectures completed</p>
    <progress value="{{ completed }}" max="{{ total }}"></progress>
{% endif %}

<h3>Lectures</h3>
<ul>
    {% for lecture in lectures %}
        <li>
            <strong>{{ lecture.title }}</strong>
            {% if progress_map|default:{}|dict_has_key:lecture.id %}
                âœ… Completed
            {% else %}
                <a href="{% url 'mark_lecture_complete' lecture.id %}">Mark as Complete</a>
            {% endif %}
        </li>
    {% endfor %}
</ul>

<h3>Upcoming Events</h3>
<ul>
    {% for event in course.events.all %}
        <li>
            <strong>{{ event.title }}</strong> <br>
            {{ event.start_time }} - {{ event.end_time }} <br>
            {{ event.description }}
        </li>
    {% empty %}
        <li>No upcoming events</li>
    {% endfor %}
</ul>
{% endblock %}
